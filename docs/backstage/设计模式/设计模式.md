# 设计模式

## 面向对象设计原则

### 单一职责原则

> **单一职责原则(Single Responsibility Principle, SRP)：一个类只负责一个功能领域中的相应职责，或者可以定义为：就一个类而言，应该只有一个引起它变化的原因。**

主要是实现代码的高内聚、低耦合。

虽是最简单的原则，但有时最难运用的，因为不是拥有较强的的设计分析能力和相关的开发经验的设计人员很难将一个类的具体职责分离出来。

### 开闭原则

> **开闭原则(Open-Closed Principle, OCP)：一个软件实体应当对扩展开放，对修改关闭。即软件实体应尽量在不修改原有代码的情况下进行扩展。**

主要是为软件开发提供稳定的系统设计架构。当出现新的需求时，扩展时无需修改原有的代码，使得软件系统在拥有适应性和灵活性的同时具备较好的稳定性和延续性；同时也可相应的降低软件开发成本。

实现开闭原则的关键是抽象化，**对系统进行抽象化设计**；为系统定义一个相对稳定的抽象层，可以将不同的实现行为转移到具体的实现层中。很多面向对象编程语言中都提供了接口、抽象类等机制，可以通过它们定义系统的抽象层，再通过具体类来进行扩展。如果需要修改系统的行为，无须对抽象层进行任何改动，只需要增加新的具体类来实现新的业务功能即可，实现在不修改已有代码的基础上扩展系统的功能，达到开闭原则的要求。

### 里氏代换原则

> **里氏代换原则(Liskov Substitution Principle, LSP)：所有引用基类（父类）的地方必须能透明地使用其子类的对象。**

里氏代换原则是实现开闭原则的重要方式之一，由于使用基类对象的地方都可以使用子类对象，因此**在程序中尽量使用基类类型来对对象进行定义，而在运行时再确定其子类类型，用子类对象来替换父类对象**。

**在传递参数时、定义成员变量、定义局部变量、确定方法返回类型时都可使用里氏代换原则。**

里氏代换原则通俗的说：**子类可以扩展父类的功能，但不能改变父类原有的功能**。

**使用里氏代换原则时需注意：**

> 1. 子类的所有方法必须在父类中声明，或子类必须实现父类中声明的所有方法。根据里氏代换原则，为了保证系统的扩展性，在程序中通常使用父类来进行定义，如果一个方法只存在子类中，在父类中不提供相应的声明，则无法在以父类定义的对象中使用该方法。
> 2. 我们在运用里氏代换原则时，尽量把父类设计为抽象类或者接口，让子类继承父类或实现父接口，并实现在父类中声明的方法，运行时，子类实例替换父类实例，我们可以很方便地扩展系统的功能，同时无须修改原有子类的代码，增加新的功能可以通过增加一个新的子类来实现。里氏代换原则是开闭原则的具体实现手段之一。
> 3. Java语言中，在编译阶段，Java编译器会检查一个程序是否符合里氏代换原则，这是一个与实现无关的、纯语法意义上的检查，但Java编译器的检查是有局限的。

### 依赖倒转原则

> **依赖倒转原则(Dependency Inversion Principle, DIP)：抽象不应该依赖于细节，细节应当依赖于抽象。换言之，要针对接口编程，而不是针对实现编程。**

依赖倒转原则要求我们在程序代码中传递参数时或在关联关系中，尽量引用层次高的抽象层类，即使用接口和抽象类进行变量类型声明、参数类型声明、方法返回类型声明，以及数据类型的转换等，而不要用具体类来做这些事情。